<!DOCTYPE html>
<html>
    <head>
        <script src="https://kit.fontawesome.com/b454b53842.js" crossorigin="anonymous"></script>
 
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"/>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
   
        -->
        <style>
            .navbtns {
 
            font-weight: bold;
            font-size: 20px;
            }
            .detailsPage {
            text-align: center;
            padding:25px;
            width:100%;
            display: flex;
           flex-direction: column;
           justify-content: center;
           align-items: center;
           
            }
            .inputel {
            min-width: 40px;
            width:200px;
            text-align: center;
 
            }
            .saveel {
                height: 45px;
                width: 160px;
                border-radius: 15px;
                font-size: 18px;
                font-weight: bold;
                background-color: rgb(230, 235, 230);
                color: white;
                text-align: center;
               
            }
 
            .backel{
                height: 45px;
                width: 120px;
                border-radius: 15px;
                font-size: 18px;
                font-weight: bold;
                background-color:rgb(43, 42, 41);
                color: white;
                text-align: center;
 
            }
 
           
 
            .btnsel {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
               
            }
 
 
            .labelel {
                display: flex;
                flex-direction: column;
                background-color: white;
                width: 100%;
           
            }
 
            .bgimg {
           
            background-color: white;
            }
 
             .borderboxel {
            
           
            border-width: 2px;
            border-color: black;
            border-style: solid;
            border-radius: 15px;
            min-width: 700px;
            min-height: 500px;
            } 
 
            .title {
            font-family: sans-serif;
          
            font-size: 30px;
            }
            
            .ex1{
              
            margin: 35px;
            text-align: center;
           
            }
            .submitel {
                height: 45px;
                width: 160px;
                border-radius: 15px;
                font-size: 18px;
                font-weight: bold;
                background-color: rgb(205, 212, 212);
                color: white;
                text-align: center;
                margin: 20px;
            }
 
   
           
            .btnel{
               
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: center;
                height: 50px;
                border-radius: 12px;
               
                }
 
                .btntext {
 
                color: white;
                font-weight: bold;
                font-size:20px ;
                }
 
               
        .navbg {
            background-color: #0d2436;
       
        }
        .container{
            margin: 20px;
            width: 100%;
           
          
            
        }
        
       
        .card1 {
            text-align: center;
        }
       
       
       
        .para1 {
            color: gainsboro;
            text-align: center;
        }
        .green-button {
       
         color: white;
         width: 80px;
           height: 50px;
       
        

  /* Add any other styles for the green button */
        }

       
        .card2 {
            padding: 15px;
            text-align: left;
            color: gainsboro;
        }
       
        .head1 {
            font-size: 25px;
            font-weight: bold;
        }
       
        .line {
            background-color: gainsboro;
        }

        .innercontainer{
          display: flex;
          flex-direction: row;
          justify-content: space-between;
        }
        .contain1{
                    background-color: white;
                    color: #002159;
                    padding: 10px;
                    margin: 0px;
                    display: flex;
                        
                    }

                .logoel{
                    display: flex;
                    flex-direction: row;
                    justify-content: center;
                    align-items: center;
                    align-self: center;
                    width: 100%;
                }
                .logo{
                    height: 30px;
                    width: 35px;
                    padding-right: 5px;
                }
                .hidden {
      display: none;
    }
       
        </style>
    </head>
    <body>
      <div class="contain1"> 
        <i onclick="window.location.href='home.html'" style="font-size: 25px; padding: 15px;" class=" fa-solid fa-house"></i>
        <div style="text-align: center;" class="logoel">
            <img src="https://cosglobal.in/wp-content/uploads/2023/11/WhatsApp-Image-2023-11-22-at-18.18.56.jpeg" class="logo ">
            <h3>COS Insurance</h3>
        </div>
    </div>
    <div class="container">
        
       
        <div class="bgimg detailsPage">


            <div class="borderboxel ">


                <div class="ex1 ">
                    <h1 class="title">Forgot password</h1>
             
                    
                        <div class="labelel">


                              <div class="innercontainer" >
                                  <div>
                                    <label for="MobileNumber">Mobile number</label>
                                  </div>
                                  <div>
                                    <input type="text" class="inputel" id="MobileNumber" placeholder="Enter Mobile number" maxlength="10" 
                                      required >
                                      <button  onclick="validateMobileNumber(); startTimer(); toggleFields();">Send Otp</button><br /><br/>
                                  
                                  </div>

                              </div>


                            <div>
                                <div id="otpPasswordFields" style="display: none;"></div>
                              <!-- <div  style="display: none;"></div> -->
                              <div class="innercontainer" >
                                <div>
                                  <label for="EnterOTP">Enter OTP</label> 
                                </div>
                                <div>
                                  <input type="text" class="inputel" id="EnterOTP" placeholder="Enter OTP" maxlength="4" placeholder="Enter your OTP" required>
                                  <button type="button" onclick="validateOTP()">Verify</button> <br/><br/>
                                </div>

                              </div>
                          
                          
                                   
                              <!-- <label for="verify" >verify OTP ?</label> -->
                              <label id="resendlabelel" for="Resend otp" onclick="resendOTP()">Resend OTP in <span id="countdowntimer"> 30</span> seconds</label><br/><br/>
                               <button id="resendOTP" class="hidden" onclick="resendOTP()">Resend OTP</button><br /><br/> 
                          </div>


                            <div  >
                                <div id="passwordForm" style="display: none;"></div>
                                <div class="innercontainer" >
                                  <div>
                                    <label for="NewPassword">New password</label> 
                                  </div>
                                  <div>
                                    <input type="password" class="inputel" id="NewPassword" placeholder="Enter your New password"
                                      required><br /><br/>
                                    </div>

                                  </div>


                                  <div class="innercontainer" >
                                    <div>
                                    <label for="ConfirmPassword">Confirm password</label>
                                  </div>
                                  <div>
                                    <input type="password" class="inputel" id="ConfirmPassword" placeholder="Enter confirm password"
                                      required><br />
                                    </div>

                                  </div>
                                      <!-- <span id="passwordMatchError" style="color: red; display: none;">Passwords do not match</span><br /><br /> -->


                                    
                          
                                </div>
                           

                        </div>
                 

                        <span id="passwordMatchError" style="color: red; display: none;">Passwords do not match</span>
                        <button type="button" class="submit-button" onclick="validatePasswords(); changePassword();">Submit</button>
              
                    
            </div>

          
        </div>
     
          
        </div>
    </div>




        <script>
              let timeleft = 30;
                  let downloadTimer;

                  function startTimer() {
                    const mobileNumber = document.getElementById("MobileNumber").value.trim();
                    var resendOTPbtn = document.getElementById("resendOTP")
                    var resendlabelel = document.getElementById("resendlabelel");

                    if (mobileNumber.length === 10) {
                      clearInterval(downloadTimer); // Clear any existing timer
                      timeleft = 30; // Reset the timer to 30 seconds
                      downloadTimer = setInterval(function() {
                        document.getElementById("countdowntimer").textContent = timeleft;
                        timeleft--;

                        if (timeleft < 0) {
                          clearInterval(downloadTimer);
                          // Handle what happens when the timer reaches 0
                          document.getElementById("countdowntimer").textContent = "";
                          resendOTPbtn.classList.remove("hidden");
                          resendlabelel.classList.add("hidden");
                          // You can add additional actions here when the time is up
                        }
                      }, 1000);
                    } else {
                      alert("Please enter a valid 10-digit mobile number.");
                    }
                  }

                  function resendOTP() {
                    startTimer(); // Start the timer again when Resend OTP button is clicked
                  }


        </script>
        
        
        
        <script>
                      const mobileNumberInput = document.getElementById("MobileNumber");

                      // Add an event listener for the input event
                      mobileNumberInput.addEventListener("input", function(event) {
                        // Get the current value of the input
                        let inputValue = event.target.value;

                        // Replace any non-digit characters with an empty string
                        inputValue = inputValue.replace(/\D/g, '');

                        // Update the input value to contain only digits
                        event.target.value = inputValue;
                      });
        </script>
      
       
         
      
      <script>
                function toggleFields() {
                    var mobileNumber = document.getElementById('MobileNumber').value;
                    var otpPasswordFields = document.getElementById('otpPasswordFields');
                    
            
                    if (mobileNumber.length === 10) {
                        otpPasswordFields.style.display = 'block';
                        document.getElementById('EnterOTP').disabled = false;
                        document.getElementById('NewPassword').disabled = false;
                        document.getElementById('ConfirmPassword').disabled = false;
                    } else {
                        otpPasswordFields.style.display = 'none';
                        document.getElementById('EnterOTP').disabled = true;
                        document.getElementById('NewPassword').disabled = true;
                        document.getElementById('ConfirmPassword').disabled = true;
                    }
                }
                toggleFields();
    </script>
    
      <script>
              function validatePasswords() {
              var newPassword = document.getElementById('NewPassword').value;
              var confirmPassword = document.getElementById('ConfirmPassword').value;
              var errorSpan = document.getElementById('passwordMatchError');
              const submitButton = document.querySelector('.submit-button');
            submitButton.classList.add('green-button');

              if (newPassword !== confirmPassword) {
                  errorSpan.style.display = 'block';
              } else {
                  errorSpan.style.display = 'noone';
                
              }
          }
        


            async function validateMobileNumber() {
                var otpUrl = 'http://localhost:8280/login/generateOtp/9381279976';
                
                var data = {
                  

                    
                    mobile:document.getElementById("MobileNumber").value,
                    
                    
                };
            
                try {
                var response = await fetch(otpUrl, {
                    method: 'POST',
                    headers: {
                    'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
            
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
            
                var responseData = await response.json();
                console.log(responseData); // You can handle the response data here
            
                } catch (error) {
                console.error('Error posting data:', error);
                }
            }










            async function validateOTP() {
                var otpUrl = 'http://localhost:8280/login/generateOtp/9381279976';
                var otp = document.getElementById("EnterOTP").value;
                var data = {  
                    otp: otp,
                      
                };
            
                try {
                var response = await fetch(otpUrl, {
                    method: 'POST',
                    headers: {
                    'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
            
                if (response.ok) {
                  var responseData = await response.json();
                  console.log(responseData); 
                   
                }
                throw new Error('Network response was not ok');
            
                } catch (error) {
                console.error('Error posting data:', error);
                }
            }




            async function changePassword() {
                var otpUrl = 'http://localhost:8280/login/generateOtp/9381279976';
                var password = document.getElementById("password").value;
                var data = {  
                    password: password,
                      
                };
            
                try {
                var response = await fetch(otpUrl, {
                    method: 'POST',
                    headers: {
                    'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
            
                if (response.ok) {
                  var responseData = await response.json();
                  console.log(responseData); 
                   
                }
                throw new Error('Network response was not ok');
            
                } catch (error) {
                console.error('Error posting data:', error);
                }
            }
      </script>
    
    </body>
      
</html>

      